{% extends "base.html" %}
{% load static %}

{% load ipa_board_tags %}

{% block content %}

{% load cache %}

{% cache 900 diphthongs_table %}

<div class="container-fluid justify-content-center footer_padding">

<div id="content">
  <div class="text-center text-white page_title_padding">
    <h3>Tableaux de la phonétique anglaise</h3>
    <h4>Diphtongues</h4>
  </div>

      <div class="container col-xl-4 col-lg-6 col-md-10 col-sm-10 col-xs-10 mx-auto card-font">
        <div class="card-body p-0">
          {% include 'web_speech_api_alert.html' %}
            {% include 'message.html' %}
              <table class="schema_section">
                <tbody>
                  <tr>
                    <td style="width: 100%; text-align: center; font-size: 120%;">
                      <!-- ipa board breadcrumbs -->
                      <div class="breadcrumbs" style="margin-bottom:1.5rem;">
                        <a href="{% url 'ipa_board:index' %}">Page d'accueil</a> >
                        <a href="{% url 'ipa_board:ipa_board_menu' %}">Menu tableau phonétique anglaise</a> >
                        <a href="{% url 'ipa_board:vowel_menu' %}">Voyelles</a>
                         > Diphtongues
                      </div>

                      <!-- vowel diagram -->
                      <svg width="100%" height="500px">
                        <line x1="5%" y1="2%" x2="42%" y2="86%" stroke="red"/>
                        <line x1="91%" y1="2%" x2="91%" y2="86%" stroke="red"/>
                        <line x1="5%" y1="2%" x2="91%" y2="2%" stroke="red"/>
                        <line x1="42%" y1="86%" x2="91%" y2="86%" stroke="red"/>
                        <line x1="17%" y1="30%" x2="91%" y2="30%" stroke="red"/>
                        <line x1="30%" y1="58%" x2="91%" y2="58%" stroke="red"/>
                        <line x1="45%" y1="2%" x2="66%" y2="86%" stroke="red"/>

                        <line x1="42%" y1="86%" x2="30%" y2="20%" stroke="blue"/>
                        <line x1="30%" y1="20%" x2="28%" y2="25%" stroke="blue"/>
                        <line x1="30%" y1="20%" x2="33%" y2="24%" stroke="blue"/>

                        <line x1="42%" y1="86%" x2="69%" y2="20%" stroke="#c554c7"/>
                        <line x1="69%" y1="20%" x2="65%" y2="22%" stroke="#c554c7"/>
                        <line x1="69%" y1="20%" x2="70%" y2="25%" stroke="#c554c7"/>

                        <line x1="17%" y1="30%" x2="27%" y2="20%" stroke="#349961"/>
                        <line x1="27%" y1="20%" x2="23%" y2="20%" stroke="#349961"/>
                        <line x1="27%" y1="20%" x2="26%" y2="25%" stroke="#349961"/>

                        <line x1="91%" y1="58%" x2="35%" y2="20%" stroke="black"/>
                        <line x1="35%" y1="20%" x2="39%" y2="19%" stroke="black"/>
                        <line x1="35%" y1="20%" x2="36%" y2="25%" stroke="black"/>

                        <line x1="89%" y1="28%" x2="73%" y2="18%" stroke="#f09132"/>
                        <line x1="73%" y1="18%" x2="77%" y2="17%" stroke="#f09132"/>
                        <line x1="73%" y1="18%" x2="75%" y2="23%" stroke="#f09132"/>
                      </svg>


                      <div style="position: absolute; left: 27%; width: 2.33em; top: 20%; ">
                        <p>ɪ</p>
                      </div>

                      <div style="position: absolute; left: 69%; width: 1em; top: 20%; ">
                        <p>ʊ</p>
                      </div>

                      <div style="position: absolute; left: 12%; width: 2.7em; top: 30%;">
                        <p>e</p>
                      </div>

                      <div style="position: absolute; left: 89%; width: 2.7em; top: 30%; ">
                        <p>o</p>
                      </div>

                      <div style="position: absolute; left: 89%; width: 2.7em; top: 56%; ">
                        <p>ɔ</p>
                      </div>

                      <div style="position: absolute; left: 38%; width: 2.7em; top: 86%; ">
                        <p>a</p>
                      </div>

                      {% for vowel in vowels %}
                        {% if vowel.label == 'aɪ' %}
                          <div class="dropdown"
                             style="position: absolute; left: 33%; width: 8%; height:8%; top: 40%; color: blue; ;
                               white-space:nowrap;">
                            <p class="vowel_letter_style" data-target="collapse_{{ vowel.label }}"
                               id="collapse_{{ vowel.label }}" data-toggle="dropdown">{{ vowel.label }}</p>

                        {% elif vowel.label == 'oʊ' %}
                          <div class="dropdown diphthong_letter"
                             style="position: absolute; left: 80%; width: 8%; height:8%; top: 22%; color: #f09132;
                              white-space:nowrap;">
                            <p class="vowel_letter_style" data-target="collapse_{{ vowel.label }}"
                               id="collapse_{{ vowel.label }}" data-toggle="dropdown">{{ vowel.label }}</p>


                        {% elif vowel.label == 'ɔɪ'  %}
                          <div class="dropdown diphthong_letter"
                             style="position: absolute; left: 49%; width: 8%; height:8%; top: 28%; color: black;
                               white-space:nowrap;">
                            <p class="vowel_letter_style" data-target="collapse_{{ vowel.label }}"
                                id="collapse_{{ vowel.label }}" data-toggle="dropdown">{{ vowel.label }}</p>

                        {% elif vowel.label == 'eɪ'  %}
                          <div class="dropdown diphthong_letter"
                             style="position: absolute; left: 16%; width: 8%; height:8%; top: 25%; color: #349961;
                              white-space:nowrap;">
                            <p class="vowel_letter_style" data-target="collapse_{{ vowel.label }}"
                                id="collapse_{{ vowel.label }}" data-toggle="dropdown">{{ vowel.label }}</p>

                        {% elif vowel.label == 'aʊ' %}
                          <div class="dropdown diphthong_letter"
                             style="position: absolute; left: 55%; width: 8%; height:8%; top: 43%; color: #c554c7;
                             white-space:nowrap;">
                            <p class="vowel_letter_style" data-target="collapse_{{ vowel.label }}"
                               id="collapse_{{ vowel.label }}" data-toggle="dropdown">{{ vowel.label }}</p>

                        {% endif %}

                        <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
                          <script type="text/javascript">
                            $(window).bind("load", function () {
                              var vowelElement = document.createElement("audio");
                              vowelElement.src = "{{ vowel.sound_file_path }}";
                              $('#play_{{ vowel.label }}').click(function(){
                                vowelElement.play();
                              });
                            });
                          </script>

                          <!-- dynamic loading of phoneme information in a dropdown window -->
                          <div class="dropdown-menu card-body p-2"
                               aria-labelledby="dropDownButton_{{ vowel.label }}">
                            <form>
                              <p id="quit_cross_{{ vowel.label }}" class="quit-cross float-right">
                                  <i class="fas fa-times"></i></p>
                              <p class="info-section-consonant-title">Diphtongue {{ vowel.label }}</p>
                              <p id="play_{{ vowel.label }}" class="listen-button"><i class="fas fa-volume-up"></i>
                                  Ecouter</p>
                              <p class="info-section-consonant-title">Exemples</p>
                                {% for example in example_words|examples:vowel.id %}
                                  <p id="play_{{ example.label }}" class="listen-button"><i class="fas fa-volume-up"></i>
                                    {{ example.label }} {{ example.ipa_label }}</p>

                                  {% block jquery %}
                                  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
                                  <script type="text/javascript">

                                    $(document).ready(function(){
                                      var audioElement = document.createElement("audio");
                                        $('#play_{{ example.label }}').click(function(){
                                          say('{{ example.label }}');
                                        });
                                    });
                                  </script>

                                  {% endblock %}

                                {% endfor %}

                            </form>

                            <script>
                              $(document).ready(function(){
                                $('#quit_cross_{{ vowel.label }}').click(function () {
                                  $('#collapse_{{ vowel.label }}').dropdown('toggle');
                                })
                              });
                            </script>
                          </div>
                          </div>
                          </div>
                          </div>
                          </div>
                          </div>

                      {% endfor %}
                    </td>
                  </tr>
                </tbody>
              </table>
           </div>
         </div>
       </div>
     </div>

{% endcache %}
{% endblock %}

{% block scripts %}
    <script type="text/javascript" src="{% static 'js/WSA_incompatibility.js' %}"></script>
    <script type="text/javascript">verify_WSA_compatibility()</script>
    {{ block.super }}

{% endblock %}