{% extends "base.html" %}
{% load static %}

{% load ipa_board_tags %}

{% block content %}

<div class="container-fluid justify-content-center footer_padding">

<div id="content">
  <div class="text-center  text-white">
    <h3 class="page_title_padding">Tableau API : Voyelles - Diphtongues</h3>
  </div>

  <div class="my-auto justify-content-center o-hidden my-5  ">
    <div class="row">
      <div class="col-xl-4 col-lg-5 col-md-10 col-sm-10 col-xs-12 mx-auto">
        <div class="card-body p-0">
          <p id="warning_browser">Votre navigateur n'est pas compatible avec Web Speech API.</p>
          <p id="warning_voices">Votre système ne semble pas être doté de voix disponible
              pour pratiquer le Text-to-Speech. Pour voir comment y remédier, consulter le README.</p>
            {% include 'message.html' %}
              <table class="schema_section">
                <tbody>
                  <tr>
                    <td style="width: 100%; text-align: center; font-size: 120%;">
                      <div class="breadcrumbs" style="margin-bottom:1.5rem;">
                        <a href="{% url 'ipa_board:index' %}">Index</a> >
                        <a href="{% url 'ipa_board:ipa_board_menu' %}">Menu du tableau API</a> >
                        <a href="{% url 'ipa_board:vowel_menu' %}">Voyelles</a>
                         > Diphtongues
                      </div>

                      <svg width="100%" height="500px">
                        <line x1="5%" y1="2%" x2="42%" y2="86%" stroke="red"/>
                        <line x1="91%" y1="2%" x2="91%" y2="86%" stroke="red"/>
                        <line x1="5%" y1="2%" x2="91%" y2="2%" stroke="red"/>
                        <line x1="42%" y1="86%" x2="91%" y2="86%" stroke="red"/>
                        <line x1="17%" y1="30%" x2="91%" y2="30%" stroke="red"/>
                        <line x1="30%" y1="58%" x2="91%" y2="58%" stroke="red"/>
                        <line x1="45%" y1="2%" x2="66%" y2="86%" stroke="red"/>

                        <line x1="42%" y1="86%" x2="30%" y2="20%" stroke="blue"/>
                        <line x1="30%" y1="20%" x2="28%" y2="25%" stroke="blue"/>
                        <line x1="30%" y1="20%" x2="33%" y2="24%" stroke="blue"/>

                        <line x1="42%" y1="86%" x2="69%" y2="20%" stroke="#c554c7"/>
                        <line x1="69%" y1="20%" x2="65%" y2="22%" stroke="#c554c7"/>
                        <line x1="69%" y1="20%" x2="70%" y2="25%" stroke="#c554c7"/>

                        <line x1="17%" y1="30%" x2="27%" y2="20%" stroke="#349961"/>
                        <line x1="27%" y1="20%" x2="24%" y2="20%" stroke="#349961"/>
                        <line x1="27%" y1="20%" x2="26%" y2="25%" stroke="#349961"/>

                        <line x1="91%" y1="58%" x2="35%" y2="20%" stroke="black"/>
                        <line x1="35%" y1="20%" x2="38%" y2="19%" stroke="black"/>
                        <line x1="35%" y1="20%" x2="36%" y2="25%" stroke="black"/>

                        <line x1="89%" y1="28%" x2="73%" y2="18%" stroke="#f09132"/>
                        <line x1="73%" y1="18%" x2="77%" y2="17%" stroke="#f09132"/>
                        <line x1="73%" y1="18%" x2="76%" y2="23%" stroke="#f09132"/>
                      </svg>


                      <div style="position: absolute; left: 27%; width: 2.33em; top: 20%; ">
                        <p>ɪ</p>
                      </div>

                      <div style="position: absolute; left: 69%; width: 1em; top: 20%; ">
                        <p>ʊ</p>
                      </div>

                      <div style="position: absolute; left: 12%; width: 2.7em; top: 30%;">
                        <p>e</p>
                      </div>

                      <div style="position: absolute; left: 89%; width: 2.7em; top: 30%; ">
                        <p>o</p>
                      </div>

                      <div style="position: absolute; left: 89%; width: 2.7em; top: 56%; ">
                        <p>ɔ</p>
                      </div>

                      <div style="position: absolute; left: 38%; width: 2.7em; top: 86%; ">
                        <p>a</p>
                      </div>

                      {% for vowel in vowels %}
                        {% if vowel.label == 'aɪ' %}
                          <div class="dropdown"
                             style="position: absolute; left: 33%; width: 2em; top: 40%; color: blue; ;
                              background-color:rgba(121, 186, 247, 0.3);border-radius: 50%;">
                            <p class="vowel_letter_style" data-target="collapse_{{ vowel.label }}"
                               id="collapse_{{ vowel.label }}" data-toggle="dropdown">{{ vowel.label }}</p>

                        {% elif vowel.label == 'oʊ' %}
                          <div class="dropdown"
                             style="position: absolute; left: 80%; width: 2em; top: 22%; color: #f09132;
                             background-color:rgba(242, 186, 123, 0.3);border-radius: 50%;">
                            <p class="vowel_letter_style" data-target="collapse_{{ vowel.label }}"
                               id="collapse_{{ vowel.label }}" data-toggle="dropdown">{{ vowel.label }}</p>


                        {% elif vowel.label == 'ɔɪ'  %}
                          <div class="dropdown"
                             style="position: absolute; left: 49%; width: 2em; top: 28%; color: black;
                              background-color:rgba(188, 191, 198, 0.3);border-radius: 50%;">
                            <p class="vowel_letter_style" data-target="collapse_{{ vowel.label }}"
                                id="collapse_{{ vowel.label }}" data-toggle="dropdown">{{ vowel.label }}</p>

                        {% elif vowel.label == 'eɪ'  %}
                          <div class="dropdown"
                             style="position: absolute; left: 16%; width: 2em; top: 25%; color: #349961;
                             background-color:rgba(189, 242, 159, 0.3);border-radius: 50%;">
                            <p class="vowel_letter_style" data-target="collapse_{{ vowel.label }}"
                                id="collapse_{{ vowel.label }}" data-toggle="dropdown">{{ vowel.label }}</p>

                        {% elif vowel.label == 'aʊ' %}
                          <div class="dropdown"
                             style="position: absolute; left: 55%; width: 2em; top: 43%; color: #c554c7;
                             background-color:rgba(239, 201, 230, 0.3);border-radius: 50%;">
                            <p class="vowel_letter_style" data-target="collapse_{{ vowel.label }}"
                               id="collapse_{{ vowel.label }}" data-toggle="dropdown">{{ vowel.label }}</p>

                        {% endif %}

                        <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
                          <script type="text/javascript">
                            $(window).bind("load", function () {
                              var vowelElement = document.createElement("audio");
                              vowelElement.src = "{{ vowel.sound_file_name }}";
                              $('#play_{{ vowel.label }}').click(function(){
                                vowelElement.play();
                              });
                            });
                          </script>

                          <div class="dropdown-menu card-body p-2"
                               aria-labelledby="dropDownButton_{{ vowel.label }}">
                            <form>
                              <p id="quit_cross_{{ vowel.label }}" class="quit-cross float-right">
                                  <i class="fas fa-times"></i></p>
                              <p class="info-section-consonant-title">Diphtongue {{ vowel.label }}</p>
                              <p id="play_{{ vowel.label }}" class="listen-button"><i class="fas fa-volume-up"></i>
                                  Ecouter</p>
                              <p class="info-section-consonant-title">Exemples</p>
                                {% for example in example_words|examples:vowel.id %}
                                  <p id="play_{{ example.label }}" class="listen-button"><i class="fas fa-volume-up"></i>
                                    {{ example.label }}</p>

                                  {% block jquery %}
                                  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
                                  <script type="text/javascript">

                                    $(document).ready(function(){
                                      var audioElement = document.createElement("audio");
                                        $('#play_{{ example.label }}').click(function(){
                                          say('{{ example.label }}');
                                        });
                                    });
                                  </script>

                                  {% endblock %}

                                {% endfor %}

                            </form>

                            <script>
                              $(document).ready(function(){
                                $('#quit_cross_{{ vowel.label }}').click(function () {
                                  $('#collapse_{{ vowel.label }}').dropdown('toggle');
                                })

                                if (!window.speechSynthesis) {
                                  $("#warning").style.display = "block";
                                };
                              });
                            </script>
                          </div>
                          </div>
                          </div>
                          </div>
                          </div>
                          </div>

                      {% endfor %}
                    </td>
                  </tr>
                </tbody>
              </table>
           </div>
         </div>
       </div>
     </div>
   </div>
</div>

{% endblock %}

{% block scripts %}
    <script type="text/javascript" src="{% static 'js/WSA_incompatibility.js' %}"></script>
    <script type="text/javascript">verify_WSA_compatibility()</script>
    {{ block.super }}

{% endblock %}